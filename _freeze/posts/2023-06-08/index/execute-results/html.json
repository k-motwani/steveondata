{
  "hash": "c3057f88740de15d40d83ca4d8bd5878",
  "result": {
    "markdown": "---\ntitle: \"Understanding the file.info() Function in R: Listing Files by Date\"\nauthor: \"Steven P. Sanderson II, MPH\"\ndate: \"2023-06-08\"\ncategories: [rtip]\n---\n\n\n# Introduction\n\nIn R, the `file.info()` function is a useful tool for retrieving file information, such as file attributes and metadata. It allows programmers to gather details about files, including their size, permissions, and timestamps. In this post, we will explore the `file.info()` function and demonstrate how it can be used to list files by date.\n\n## Explaining the file.info() Function:\nThe `file.info()` function returns a data frame with file information as its columns. Each row corresponds to a file, and the columns contain attributes such as the file size, permissions, and timestamps. This function accepts one or more file paths as its argument, providing flexibility in examining multiple files simultaneously. The following columns are returned in the data.frame that results from `file.info()`:\n\n*    `name`: The name of the file.\n*    `size`: The size of the file in bytes.\n*    `mode`: The mode of the file, which can be used to determine the file's permissions.\n*    `mtime`: The modification time of the file.\n*    `ctime`: The creation time of the file.\n*    `atime`: The last access time of the file.\n\nIn order to get some data to work with, we will save the iris dataset as an excel file four times in a for loop, waiting 10 seconds between each save.\n\n```R\nlibrary(writexl)\n\n# Generate file names\nfile_prefix <- \"iris\"\nfile_extension <- \".xlsx\"\nnum_files <- 4\n\n# Save iris dataset as Excel files\nfor (i in 1:num_files) {\n  file_name <- paste0(file_prefix, \"_\", i, file_extension)\n  write_xlsx(iris, file_name)\n  cat(\"File\", file_name, \"saved successfully.\\n\")\n  Sys.sleep(10) # Sleep for 10 seconds then go again\n}\n```\n\n# Examples\n\n## Example 1: Retrieving File Information\n\nLet's begin by retrieving information about a single file. we have a file named \"iris_1.xlsx\" located in our working directory. We can use the `file.info()` function to obtain its attributes:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfile_info <- file.info(\"iris_1.xlsx\")\nprint(file_info)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n            size isdir mode               mtime               ctime\niris_1.xlsx 8497 FALSE  666 2023-06-08 07:34:30 2023-06-08 07:34:29\n                          atime exe\niris_1.xlsx 2023-06-08 07:58:19  no\n```\n:::\n:::\n\n\nThe output will display a data frame with the attributes of the \"iris_1.xlsx\" file, including the file size, permissions, and timestamps. This information can be valuable for tasks such as file management and quality control.\n\n## Example 2: Listing Files by Date\n\nNow, let's dive into listing files based on their dates. To achieve this, we will combine the `file.info()` function with other functions to extract and manipulate the timestamp information.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Obtain file information for all files in a directory\nfiles <- list.files(full.names = TRUE, pattern = \"*.xlsx$\")\nfile_info <- file.info(files)\nfile_info$file_name <- rownames(file_info)\n\n# Sort files by modification date in ascending order\nsorted_files <- files[order(file_info$mtime)]\n\n# Display the sorted file list\nprint(sorted_files)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"./iris_1.xlsx\" \"./iris_2.xlsx\" \"./iris_3.xlsx\" \"./iris_4.xlsx\"\n```\n:::\n\n```{.r .cell-code}\nfile_info[order(file_info$mtime), ]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n              size isdir mode               mtime               ctime\n./iris_1.xlsx 8497 FALSE  666 2023-06-08 07:34:30 2023-06-08 07:34:29\n./iris_2.xlsx 8497 FALSE  666 2023-06-08 07:34:41 2023-06-08 07:34:41\n./iris_3.xlsx 8497 FALSE  666 2023-06-08 07:34:52 2023-06-08 07:34:52\n./iris_4.xlsx 8497 FALSE  666 2023-06-08 07:35:05 2023-06-08 07:35:05\n                            atime exe     file_name\n./iris_1.xlsx 2023-06-08 07:59:30  no ./iris_1.xlsx\n./iris_2.xlsx 2023-06-08 07:58:19  no ./iris_2.xlsx\n./iris_3.xlsx 2023-06-08 07:58:19  no ./iris_3.xlsx\n./iris_4.xlsx 2023-06-08 07:58:19  no ./iris_4.xlsx\n```\n:::\n:::\n\n\nIn this example, we first specify the directory path where our target files are located. By using `list.files()`, we obtain a vector of file names within that directory. Setting `full.names = TRUE` ensures that the file paths include the directory path. We also used the `pattern` parameter to ensure that we only grab the Excel files.\n\nNext, we use `file.info()` on the vector of file names to retrieve the file information for all files in the directory. The resulting data frame, `file_info`, contains details about each file, including the modification timestamp (`mtime`).\n\nTo list the files by date, we sort the file names vector based on the modification timestamp, using `order(file_info$mtime)`. The resulting `sorted_files` vector contains the file paths sorted in ascending order based on the modification date.\n\nFinally, we print the sorted file list to the console, providing an easy way to visualize the files listed by their modification date.\n\nLet's go over some more examples. How about you want to see the files that were created in the last 24 hours, well, you could then do the following:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfiles <- file.info(list.files(), full.names = TRUE)\nfiles <- files[files$mtime >= Sys.time() - 24 * 60 * 60, ]\nprint(files)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n                size isdir mode               mtime               ctime\nindex.qmd       5161 FALSE  666 2023-06-08 07:59:28 2023-06-07 08:14:49\nindex.rmarkdown 5281 FALSE  666 2023-06-08 07:59:30 2023-06-08 07:59:30\niris_1.xlsx     8497 FALSE  666 2023-06-08 07:34:30 2023-06-08 07:34:29\niris_2.xlsx     8497 FALSE  666 2023-06-08 07:34:41 2023-06-08 07:34:41\niris_3.xlsx     8497 FALSE  666 2023-06-08 07:34:52 2023-06-08 07:34:52\niris_4.xlsx     8497 FALSE  666 2023-06-08 07:35:05 2023-06-08 07:35:05\nNA                NA    NA <NA>                <NA>                <NA>\n                              atime  exe\nindex.qmd       2023-06-08 07:59:29   no\nindex.rmarkdown 2023-06-08 07:59:30   no\niris_1.xlsx     2023-06-08 07:59:30   no\niris_2.xlsx     2023-06-08 07:59:30   no\niris_3.xlsx     2023-06-08 07:59:30   no\niris_4.xlsx     2023-06-08 07:59:30   no\nNA                             <NA> <NA>\n```\n:::\n:::\n\n\nThe `file.infor()` function can also be used to filter files by other criteria such as size. Lets say we want to find all files that are larger than 100MB, well we could do the following:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfiles <- file.info(list.files(), full.name = TRUE)\nfiles <- files[files$size > 100 * 1024^2, ]\nprint(files)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   size isdir mode mtime ctime atime  exe\nNA   NA    NA <NA>  <NA>  <NA>  <NA> <NA>\n```\n:::\n:::\n\n\nWe can see that we had no files greater than 100MB in the current directory.\n\n# Conclusion\n\nThe `file.info()` function in R is a valuable tool for retrieving file information. In this post, we explored its usage and learned how to list files by date. By combining `file.info()` with other functions, we can extract and manipulate file attributes, enabling us to perform various file management tasks effectively. Understanding `file.info()` expands our capabilities in R programming, empowering us to work with file systems efficiently.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}