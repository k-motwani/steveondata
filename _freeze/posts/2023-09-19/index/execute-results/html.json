{
  "hash": "ad2012acf428e83c4f998e2b2302deeb",
  "result": {
    "markdown": "---\ntitle: \"Exploring Data with Scatter Plots by Group in R\"\nauthor: \"Steven P. Sanderson II, MPH\"\ndate: \"2023-09-19\"\ncategories: [rtip, viz]\n---\n\n\n# Introduction\n\nData visualization is a powerful tool for gaining insights from your data. Scatter plots, in particular, are excellent for visualizing relationships between two continuous variables. But what if you want to compare multiple groups within your data? In this blog post, we'll explore how to create engaging scatter plots by group in R. We'll walk through the process step by step, providing several examples and explaining the code blocks in simple terms. So, whether you're a data scientist, analyst, or just curious about R, let's dive in and discover how to make your data come to life!\n\n# Prerequisites:\n\nBefore we get started, make sure you have R and RStudio installed on your computer. If you haven't already, you can download them from the official websites: [R](https://www.r-project.org/) and [RStudio](https://www.rstudio.com/).\n\n# Data Preparation:\n\nFor this tutorial, we'll use a sample dataset called `iris`. It's included in R and contains information about three different species of iris flowers. To begin, load the dataset:\n\n```R\n# Load the iris dataset\ndata(iris)\n```\n\nNow, let's examine the first few rows of the dataset using the `head()` function:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# View the first 6 rows of the dataset\nhead(iris)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  Sepal.Length Sepal.Width Petal.Length Petal.Width Species\n1          5.1         3.5          1.4         0.2  setosa\n2          4.9         3.0          1.4         0.2  setosa\n3          4.7         3.2          1.3         0.2  setosa\n4          4.6         3.1          1.5         0.2  setosa\n5          5.0         3.6          1.4         0.2  setosa\n6          5.4         3.9          1.7         0.4  setosa\n```\n:::\n:::\n\n\nThis dataset has four numeric variables: Sepal.Length, Sepal.Width, Petal.Length, and Petal.Width. The fifth variable, Species, represents the different iris species (Setosa, Versicolor, and Virginica). We'll use this categorical variable to group our data for scatter plots.\n\n# Examples\n\n## Using `ggplot2`\n\n### Creating Scatter Plots by Group:\nTo create scatter plots by group, we'll use the popular R package, ggplot2. If you haven't installed it yet, you can do so using the following command:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nif(!require(ggplot2)){install.packages(\"ggplot2\")}\n```\n:::\n\n\nNow, let's load the ggplot2 library:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load the ggplot2 library\nlibrary(ggplot2)\n```\n:::\n\n\n#### Example 1: Basic Scatter Plot\n\nLet's start with a basic scatter plot that shows the relationship between Sepal.Length and Sepal.Width for all iris species. We'll color the points by species to distinguish them:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create a basic scatter plot\nggplot(\n  data = iris, \n  aes(x = Sepal.Length, y = Sepal.Width, color = Species)) +\n  geom_point() +\n  labs(title = \"Sepal Length vs. Sepal Width by Species\",\n       x = \"Sepal Length\",\n       y = \"Sepal Width\") +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\nIn this code:\n- We specify the dataset (`iris`) and the variables we want to plot.\n- `geom_point()` adds the points to the plot.\n- `labs()` is used to add a title and label the axes.\n\n#### Example 2: Faceted Scatter Plot\n\nNow, let's take it a step further and create separate scatter plots for each iris species using faceting:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create faceted scatter plots\nggplot(\n  data = iris, \n  aes(x = Sepal.Length, y = Sepal.Width, color = Species)) +\n  geom_point() +\n  facet_wrap(~Species) +\n  labs(title = \"Sepal Length vs. Sepal Width by Species\",\n       x = \"Sepal Length\",\n       y = \"Sepal Width\") +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\nIn this example, `facet_wrap(~Species)` creates three individual scatter plots, one for each iris species. This makes it easier to compare the species' characteristics.\n\n#### Example 3: Customized Scatter Plot\n\nLet's customize our scatter plot further by adding regression lines and adjusting point aesthetics:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create a customized scatter plot\nggplot(\n  data = iris, \n  aes(x = Sepal.Length, y = Sepal.Width, color = Species)) +\n  geom_point(size = 3, alpha = 0.7, shape = 19) +\n  geom_smooth(method = \"lm\", se = FALSE) +\n  labs(title = \"Customized Sepal Length vs. Sepal Width by Species\",\n       x = \"Sepal Length\",\n       y = \"Sepal Width\") +\n  theme_minimal()\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`geom_smooth()` using formula = 'y ~ x'\n```\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\nIn this example:\n- `geom_point()` now includes size, alpha (transparency), and shape aesthetics.\n- `geom_smooth()` adds linear regression lines to each group.\n\n## Using Base R\n\n### Example 1: Basic Scatter Plot in Base R\n\nTo create a basic scatter plot in base R, we can use the `plot()` function. Here's how to create a scatter plot of Sepal.Length vs. Sepal.Width by grouping on the \"Species\" variable:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create a basic scatter plot\nplot(iris$Sepal.Length, iris$Sepal.Width, col = iris$Species, \n     pch = 19, main = \"Sepal Length vs. Sepal Width by Species\",\n     xlab = \"Sepal Length\", ylab = \"Sepal Width\")\nlegend(\"topright\", legend = levels(iris$Species), col = 1:3, pch = 19)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\nIn this code:\n- `plot()` is used to create the scatter plot.\n- We specify the x and y variables, and we use the `col` argument to color the points by species.\n- `pch` specifies the point character (shape).\n- `main`, `xlab`, and `ylab` are used to add a title and label the axes.\n- `legend()` adds a legend to distinguish the species colors.\n\n### Example 2: Faceted Scatter Plot in Base R\n\nTo create faceted scatter plots in base R, we can use the `split()` function to split the data by the \"Species\" variable and then create individual scatter plots for each group:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Split the data by species\nsplit_data <- split(iris, iris$Species)\n\n# Create faceted scatter plots\npar(mfrow = c(1, 3))  # Arrange plots in one row and three columns\nfor (i in 1:3) {\n  plot(split_data[[i]]$Sepal.Length, split_data[[i]]$Sepal.Width, \n       pch = 19, main = levels(iris$Species)[i], \n       xlab = \"Sepal Length\", ylab = \"Sepal Width\")\n}\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n\n```{.r .cell-code}\npar(mfrow = c(1, 1))\n```\n:::\n\n\nIn this code:\n- We first use `split()` to split the data into three groups based on the \"Species\" variable.\n- Then, we use a `for` loop to create individual scatter plots for each group.\n- `par(mfrow = c(1, 3))` arranges the plots in one row and three columns.\n\n### Example 3: Customized Scatter Plot in Base R\nTo create a customized scatter plot in base R, we can adjust various graphical parameters. Here's an example with customized aesthetics and regression lines:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create a customized scatter plot with regression lines\nplot(iris$Sepal.Length, iris$Sepal.Width, col = iris$Species, \n     pch = 19, main = \"Customized Sepal Length vs. Sepal Width by Species\",\n     xlab = \"Sepal Length\", ylab = \"Sepal Width\")\nlegend(\"topright\", legend = levels(iris$Species), col = 1:3, pch = 19)\n\n# Add regression lines\nfor (i in 1:3) {\n  group_data <- split_data[[i]]\n  lm_fit <- lm(Sepal.Width ~ Sepal.Length, data = group_data)\n  abline(lm_fit, col = i)\n}\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\nIn this code:\n- We add regression lines to each group using a `for` loop and the `abline()` function.\n- The `lm()` function is used to fit linear regression models to each group separately.\n\nNow you have recreated the scatter plots by group using base R. Feel free to explore more customization options and adapt these examples to your specific needs. Happy coding!\n\n# Conclusion:\nCreating scatter plots by group in R allows you to uncover hidden patterns and trends within your data. We've explored basic scatter plots, faceted plots, and even customized visualizations. Remember, the power of R lies in its flexibility, so don't hesitate to experiment and make these examples your own. Try different datasets and variables, change colors, and explore various plotting options to truly harness the power of data visualization in R. Happy coding!",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}