{
  "hash": "12bb5a3cbc85b0ff74fe5a1910361913",
  "result": {
    "markdown": "---\ntitle: \"\"\nauthor: \"Steven P. Sanderson II, MPH\"\ndate: \"2023-10-05\"\ncategories: [rtip, viz]\n---\n\n\n# Introduction\n\nAs an R programmer, you may want to create added variable plots to visualize the relationship between a predictor variable and the response variable while controlling for the effects of other predictor variables. In this blog post, we will use the `car` library and the `avPlots()` function to create added variable plots in R.\n\n# What are Added Variable Plots?\n\nAdded variable plots, also known as partial-regression plots, are used to visualize the relationship between a predictor variable and the response variable while controlling for the effects of other predictor variables. They are useful for identifying non-linear relationships and outliers, and for checking the linearity assumption of a linear regression model.\n\n# How to Create Added Variable Plots in R\n\nTo create added variable plots in R, we will use the `avPlots()` function from the `car` library. Here is an example code block:\n\n\n::: {.cell messages='false'}\n\n```{.r .cell-code}\n# Load the car library\nlibrary(car)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nLoading required package: carData\n```\n:::\n\n```{.r .cell-code}\n# Fit a linear regression model\nmodel <- lm(mpg ~ disp + hp + drat + am, data = mtcars)\n\n# Create added variable plots\navPlots(model)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n:::\n\n\nLet's break down this code block:\n\n- First, we load the `car` library using the `library()` function.\n- Next, we fit a linear regression model using the `lm()` function. The model formula specifies `mpg` as the response variable and `disp`, `hp`, `am` and `drat` as the predictor variables. The data for the model is `mtcars`.\n- Finally, we create added variable plots using the `avPlots()` function and passing in the `model` object.\n\n## Interpretation of Added Variable Plots\n\nThe added variable plots show the relationship between each predictor variable and the response variable while controlling for the effects of the other predictor variables. The x-axis represents the partial residuals of the predictor variable, and the y-axis represents the partial residuals of the response variable. The line in the plot represents the fitted values from a linear regression model of the partial residuals of the response variable on the partial residuals of the predictor variable.\n\nIf the relationship between the predictor variable and the response variable is linear, the line in the plot should be approximately horizontal. If the relationship is non-linear, the line may be curved. If there is an outlier, it may be visible as a point that is far away from the other points in the plot.\n\n## Conclusion\n\nIn this blog post, we have learned how to create added variable plots in R using the `car` library and the `avPlots()` function. We have also discussed the interpretation of added variable plots and their usefulness in identifying non-linear relationships and outliers. I encourage you to try creating added variable plots on your own and explore the relationships between predictor variables and response variables in your own datasets.\n\n# Resources\n*   [1] https://rdrr.io/cran/car/man/avPlots.html\n*   [2] https://search.r-project.org/CRAN/refmans/car/html/avPlots.html\n*   [3] https://www.geeksforgeeks.org/how-to-create-added-variable-plots-in-r/\n*   [4] https://stackoverflow.com/questions/59150905/is-there-a-ggplot2-analogue-to-the-avplots-function-in-r\n*   [6] https://www.rdocumentation.org/link/avPlots?package=car&version=2.0-0",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}